@model IEnumerable<My_Uni_Hub.Models.Pages.Student>

@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewBag.Title = "Manage Students";
}

@section Styles {
    <link rel="stylesheet" href="~/css/Admin/IndexStudent.css" asp-append-version="true" />
}

<div class="dashboard-container">
    <main class="main-content">
        <div class="breadcrumb">
            <a href="@Url.Action("dashboard", "admin")">Dashboard</a> /
            <span>Users</span>
        </div>

        <div class="header">
            <h1 class="header-title">Manage Students</h1>
            <a class="btn-add" href="@Url.Action("Register", "Auth", new { area = "Admin" })">+ Add Student</a>
        </div>

        <div class="students-grid" id="studentsGrid">
            @if (!Model?.Any() ?? true)
            {
                <div class="empty-state">
                    <div class="empty-icon">👥</div>
                    <h3 class="empty-title">No students yet</h3>
                    <p class="empty-text">Create your first student.</p>
                    <a class="btn-add" href="@Url.Action("Register", "Auth")">+ Add Student</a>
                </div>
            }
            else
            {
                foreach (var s in Model)
                {
                    <div class="student-card" data-id="@s.Id">
                        <div class="student-top">
                            <div class="avatar">
                                @if (!string.IsNullOrWhiteSpace(s.PhotoUrl))
                                {
                                    <img src="@Url.Content(s.PhotoUrl)" alt="@s.FullName" />
                                }
                                else
                                {
                                    <div class="avatar-placeholder">@((s.FullName?.Split(' ').FirstOrDefault() ?? "U")[0])</div>
                                }
                            </div>

                            <div class="student-info">
                                <h3 class="student-name">@s.FullName</h3>
                                <div class="student-meta">
                                    <span class="meta-item">@s.Email</span>
                                    <span class="meta-item">@((s.Faculty?.Name) ?? "—")</span>
                                    <span class="meta-item">@((s.Department?.Name) ?? "—")</span>
                                </div>
                            </div>
                        </div>

                        <div class="student-actions">
                            <a class="btn-edit" href="@Url.Action("Edit", "Student", new { area = "Admin", id = s.Id })">Edit</a>

                            <form asp-action="Delete" asp-controller="Student" asp-area="Admin" asp-route-id="@s.Id" method="post" class="delete-form" style="display:inline;">
                                @Html.AntiForgeryToken()
                                <button type="button" class="btn-delete" data-id="@s.Id">Delete</button>
                            </form>
                        </div>
                    </div>
                }
            }
        </div>
    </main>
</div>

@section Scripts {
    <script src="~/js/Admin/IndexStudent.js" asp-append-version="true"></script>
}
