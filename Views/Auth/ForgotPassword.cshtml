@using My_Uni_Hub.Models.ViewModels.UserViewModel
@model ForgotPasswordViewModel

@{
    ViewData["Title"] = "Forgot Password";
    Layout = "_AuthLayout";   // 🔥 أهم خطوة!
}

<div class="wrap-login100 p-t-30 p-b-50">
    <span class="login100-form-title p-b-41">
        FORGOT PASSWORD?
    </span>

    <form class="login100-form validate-form p-b-33 p-t-5"
          method="post"
          asp-controller="Auth"
          asp-action="ForgotPassword">

        @* 🔥 Success Message *@
        @if (!string.IsNullOrEmpty(ViewBag.SuccessMessage))
        {
            <div class="alert alert-success" role="alert" style="margin-bottom: 20px;">
                @ViewBag.SuccessMessage

                @if (!string.IsNullOrEmpty(ViewBag.ResetLink))
                {
                    <hr />
                    <a href="@ViewBag.ResetLink"
                       class="btn btn-primary btn-block"
                       style="background: linear-gradient(to right, #21d4fd, #b721ff);
                              border: none;
                              padding: 12px;
                              border-radius: 25px;
                              text-decoration: none;
                              color: white;
                              font-weight: bold;
                              display: block;">
                        🔑 Click Here to Reset Password
                    </a>

                    <small class="d-block mt-2">Or copy this link:</small>
                    <input type="text"
                           class="form-control mt-1"
                           value="@ViewBag.ResetLink"
                           readonly
                           onclick="this.select()" />
                }
            </div>
        }

        @* 🔥 Validation Summary *@
        <div asp-validation-summary="All" class="text-danger"></div>

        <p class="text-center" style="color: #999; margin-bottom: 20px;">
            Enter your email address and we’ll send you a reset link.
        </p>

        @* 🔥 Email Input *@
        <div class="wrap-input100 validate-input"
             data-validate="Valid email is required: ex@abc.xyz">

            <input class="input100" asp-for="Email" type="email" placeholder="Email">
            <span class="focus-input100" data-placeholder="&#xe818;"></span>
        </div>

        <span asp-validation-for="Email" class="text-danger"></span>

        @* 🔥 Button *@
        <div class="container-login100-form-btn m-t-32">
            <button class="login100-form-btn" type="submit">
                Send Reset Link
            </button>
        </div>

        @* 🔥 Back to Login *@
        <div class="text-center p-t-20">
            <a class="txt2" asp-controller="Auth" asp-action="Login">
                <i class="fa fa-long-arrow-left m-r-5"></i>
                Back to Login
            </a>
        </div>

    </form>
</div>
